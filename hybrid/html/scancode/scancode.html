<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>廣告啟動頁</title>
		<link rel="stylesheet" href="../css/advertise.css">
		<!-- uni 的 SDK -->
		<script type="text/javascript" src="../js/webView.js"></script>
		<script type="text/javascript" src="../../node_modules/html5-qrcode/html5-qrcode.min.js"></script>
	</head>
	<body>
		<div class="content">
				<div id="errorMsg" style="color: #fff!important; background-color: #000;">1231241241</div>
			<div class="con">
				<div id="reader" width="600px"></div>
			</div>
			<div class="btn" id="timer">
				<div id="info">skip</div>
				<div class="circleProgress_wrapper btn">
					<div class="wrapper right">
						<div class="circleProgress rightcircle"></div>
					</div>
					<div class="wrapper left">
						<div class="circleProgress leftcircle"></div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script>
		function onScanSuccess(decodedText, decodedResult) {
		  // handle the scanned code as you like, for example:
		  alert(`Code matched = ${decodedText}`, decodedResult);
		}
		
		function onScanFailure(error) {
		  // handle scan failure, usually better to ignore and keep scanning.
		  // for example:
		  alert(`Code scan error = ${error}`);
		}
		document.addEventListener('UniAppJSBridgeReady', function() {
			
			document.querySelector('.btn').addEventListener('click', function(e) {
				if (e.isTrusted) {
					alert(1)
					plus.webview.currentWebview().close();
				}
			});
			
			// 广告点击跳转app内页			document.querySelector('.enter').addEventListener('click', function(e) {				if (e.isTrusted) {					plus.webview.currentWebview().close();					uni.reLaunch({
						url: 'pages/index/index',
					});				}			});
			
			
			
			let html5QrcodeScanner = new Html5QrcodeScanner(
			  "reader",
			  { fps: 10, qrbox: {width: 250, height: 250} },
			  /* verbose= */ false);
			  alert(html5QrcodeScanner)
			html5QrcodeScanner.render(onScanSuccess, onScanFailure);
		});
	</script>
</html>
